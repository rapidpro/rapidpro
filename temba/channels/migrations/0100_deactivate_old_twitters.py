# Generated by Django 2.0.8 on 2018-08-24 20:02

from django.db import migrations


def deactivate_old_twitter_channels(apps, schema_editor):
    from temba.channels.models import Channel

    channels = list(Channel.objects.filter(channel_type="TT", is_active=True))
    if channels:
        print(f"Found {len(channels)} to deactivate...")

    for ch in channels:
        ch.release()
        print(f" > Deactivated old Twitter channel #{ch.id}")


class Migration(migrations.Migration):

    dependencies = [("channels", "0099_triggers")]

    operations = [migrations.RunPython(deactivate_old_twitter_channels)]
